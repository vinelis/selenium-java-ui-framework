  name: Run Selenium Tests and Publish Allure Report
  
  on:
    push:
      branches: [ main ]
  
  permissions:
    contents: write
  
  jobs:
    build-and-test:
      runs-on: ubuntu-latest
      steps:
        - name: Checkout repository
          uses: actions/checkout@v4
  
        - name: Set up JDK 17
          uses: actions/setup-java@v4
          with:
            java-version: '17'
            distribution: 'temurin'
  
        - name: Run tests with Maven
          run: mvn clean test
  
        - name: Generate and Publish Allure Report
          uses: simple-elf/allure-report-action@v1.7
          if: always()
          with:
            gh_pages: gh-pages
            allure_results: allure-results
            allure_history: allure-history